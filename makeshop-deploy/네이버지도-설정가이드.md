# 네이버 지도 API 설정 가이드

## 🚨 현재 문제
"네이버 지도 Open API 인증이 실패하였습니다" 에러 발생

## ✅ 해결 방법

### 1단계: 네이버 클라우드 플랫폼 설정 확인

1. **네이버 클라우드 플랫폼 콘솔 접속**
   ```
   https://console.naver.com/ncloud/
   ```

2. **Services > Maps > Web Dynamic Map**
   - Application 이름: 파트너맵
   - Client ID 확인: `bfp8odep5r`

3. **Web 서비스 URL 등록 확인**
   - 현재 메이크샵 도메인이 등록되어 있는지 확인
   - 예: `https://your-store.makeshop.co.kr`
   - ⚠️ **도메인이 등록되지 않으면 인증 실패!**

4. **등록 방법**
   ```
   Settings > Web 서비스 URL
   - https://your-store.makeshop.co.kr (메이크샵 도메인)
   - http://localhost:8080 (로컬 테스트용)
   ```

---

### 2단계: 새 클라이언트 ID 발급 (추천)

기존 클라이언트 ID가 만료되었거나 문제가 있을 수 있습니다.

1. **네이버 클라우드 플랫폼 > AI·NAVER API > Maps**
2. **Application 등록**
   - Application 이름: 파트너맵_v3
   - Service: Maps
   - Web Dynamic Map 선택

3. **Web 서비스 URL 등록**
   ```
   메이크샵 도메인 입력 (필수!)
   예: https://fresco21.makeshop.co.kr
   ```

4. **인증 정보 확인**
   - Client ID: xxxxxxxxxxxxx (새로 발급된 ID)
   - Client Secret: (사용 안 함)

---

### 3단계: 배포 파일 수정

**파일: 01-html.html**

기존 코드:
```html
<!-- 네이버 지도 SDK (ncpKeyId 인증) -->
<script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=bfp8odep5r"></script>
```

수정 후:
```html
<!-- 네이버 지도 SDK (새 클라이언트 ID로 변경) -->
<script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=새로_발급받은_ID"></script>
```

**파일: 03-js-full.js (또는 03-js-part1.js)**

기존 코드:
```javascript
var CONFIG = {
    naverMapNcpKeyId: 'bfp8odep5r',
```

수정 후:
```javascript
var CONFIG = {
    naverMapNcpKeyId: '새로_발급받은_ID',
```

---

## 🧪 테스트 방법

### 로컬 테스트
```bash
cd /Users/jangjiho/workspace/partner-map
python3 -m http.server 8080
```

브라우저에서 `http://localhost:8080` 접속

**주의**: 네이버 클라우드에서 `http://localhost:8080` URL을 등록해야 합니다!

---

## 📞 빠른 해결 (임시)

### 옵션 A: 기존 ID 도메인 추가
1. 네이버 클라우드 플랫폼 로그인
2. Maps > Application (`bfp8odep5r`) 선택
3. Web 서비스 URL에 메이크샵 도메인 추가
4. 저장 후 5분 대기

### 옵션 B: 새 클라이언트 ID 발급
1. 새 Application 생성
2. 메이크샵 도메인 등록
3. 새 Client ID 복사
4. 01-html.html과 config.js 수정
5. 메이크샵에 재배포

---

## ⚠️ 자주 하는 실수

1. **도메인 등록 안 함** (가장 흔함!)
   - ✅ 반드시 메이크샵 도메인 등록 필요

2. **http vs https 오타**
   - ❌ `http://fresco21.makeshop.co.kr`
   - ✅ `https://fresco21.makeshop.co.kr`

3. **클라이언트 ID 오타**
   - HTML과 JS에서 ID가 일치해야 함

4. **캐시 문제**
   - 브라우저 캐시 삭제 (Ctrl+Shift+R)
   - 메이크샵 캐시 삭제

---

## 📊 확인 체크리스트

- [ ] 네이버 클라우드 플랫폼 로그인 가능
- [ ] Maps Application 존재 확인
- [ ] Client ID 유효 확인 (`bfp8odep5r` 또는 새 ID)
- [ ] 메이크샵 도메인 등록 확인
- [ ] HTML 파일 SDK 스크립트 확인
- [ ] config.js 클라이언트 ID 일치 확인
- [ ] 브라우저 콘솔 에러 확인

---

## 🔗 참고 링크

- 네이버 클라우드 플랫폼: https://console.naver.com/ncloud/
- Maps API 가이드: https://api.ncloud-docs.com/docs/ai-naver-mapswebdynamicmap
- 메이크샵 관리자: (메이크샵 도메인)/admin

