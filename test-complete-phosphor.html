<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파트너맵 v3 - Phosphor Icons 완전 테스트</title>

    <!-- Phosphor Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.2/src/regular/style.css">

    <!-- CSS 파일 (로컬) -->
    <link rel="stylesheet" href="./makeshop-css.css">

    <style>
        /* 테스트용 추가 스타일 */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
        }

        .test-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ff9800;
            color: white;
            padding: 10px;
            text-align: center;
            z-index: 10000;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        #partnermap-container {
            margin-top: 50px; /* 테스트 배너 공간 */
        }

        .ph {
            color: #7d9675 !important; /* Phosphor Icons 색상 강제 (테스트용) */
        }
    </style>
</head>
<body>
    <!-- 테스트 배너 -->
    <div class="test-banner">
        🧪 로컬 테스트 모드 | Phosphor Icons 적용 버전 | F12 개발자 도구로 콘솔 확인
    </div>

    <!-- Fuse.js (검색 라이브러리) -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <!-- 네이버 지도 SDK -->
    <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=bfp8odep5r"></script>

    <!-- 메인 컨테이너 -->
    <div id="partnermap-container">

        <!-- 로딩 오버레이 -->
        <div id="pm-loading-overlay" class="pm-loading-overlay">
            <div class="pm-spinner"></div>
            <p>파트너 데이터를 불러오는 중...</p>
        </div>

        <!-- 히어로 섹션 -->
        <section class="pm-hero">
            <h1 class="pm-hero-title">전국 제휴 업체 지도</h1>
            <p class="pm-hero-subtitle">프레스코21과 함께하는 압화·플라워디자인 업체를 찾아보세요</p>
        </section>

        <!-- 검색 및 필터 영역 -->
        <section class="pm-search-filter">
            <div class="pm-search-container">
                <!-- 검색창 -->
                <div class="pm-search-box">
                    <input
                        type="text"
                        id="pm-search-input"
                        class="pm-search-input"
                        placeholder="업체명, 주소, 카테고리로 검색..."
                        autocomplete="off"
                    >
                    <button id="pm-search-btn" class="pm-search-btn" aria-label="검색">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="M21 21l-4.35-4.35"></path>
                        </svg>
                    </button>

                    <!-- 자동완성 드롭다운 -->
                    <div id="pm-autocomplete" class="pm-autocomplete"></div>
                </div>

                <!-- GPS 버튼 -->
                <button id="pm-gps-btn" class="pm-gps-btn" title="내 위치에서 검색">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <span>내 위치</span>
                </button>
            </div>

            <!-- 활성 필터 배지 -->
            <div id="pm-active-filters" class="pm-active-filters"></div>

            <!-- 필터 버튼 그룹 -->
            <div class="pm-filter-tabs">
                <button class="pm-filter-tab active" data-filter-type="category">카테고리</button>
                <button class="pm-filter-tab" data-filter-type="region">지역</button>
                <button class="pm-filter-tab" data-filter-type="association">협회</button>
                <button class="pm-filter-tab" data-filter-type="partnerType">파트너 유형</button>
                <button class="pm-filter-tab" data-filter-type="favorites">즐겨찾기</button>
            </div>

            <!-- 필터 콘텐츠 -->
            <div class="pm-filter-content">
                <div id="pm-filter-category" class="pm-filter-group active"></div>
                <div id="pm-filter-region" class="pm-filter-group"></div>
                <div id="pm-filter-association" class="pm-filter-group"></div>
                <div id="pm-filter-partnerType" class="pm-filter-group"></div>
                <div id="pm-filter-favorites" class="pm-filter-group">
                    <p class="pm-empty-message">즐겨찾기한 업체가 없습니다.</p>
                </div>
            </div>
        </section>

        <!-- 메인 콘텐츠 영역 -->
        <section class="pm-main-content">
            <!-- 지도 -->
            <div class="pm-map-container">
                <div id="naverMap" class="pm-map"></div>

                <!-- 지도 컨트롤 -->
                <div class="pm-map-controls">
                    <button id="pm-reset-map-btn" class="pm-control-btn" title="지도 초기화">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"></path>
                            <path d="M21 12a9 9 0 0 1-9 9 9 9 0 0 1-6-2.3l-3-2.7"></path>
                        </svg>
                    </button>
                    <button id="pm-clear-reference-btn" class="pm-control-btn" title="기준점 초기화" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="15" y1="9" x2="9" y2="15"></line>
                            <line x1="9" y1="9" x2="15" y2="15"></line>
                        </svg>
                    </button>
                </div>

                <!-- 결과 카운트 -->
                <div class="pm-result-count">
                    <span id="pm-result-count-text">전체 0개 업체</span>
                </div>
            </div>

            <!-- 파트너 리스트 -->
            <div class="pm-list-container">
                <div class="pm-list-header">
                    <h2>업체 목록</h2>
                    <select id="pm-sort-select" class="pm-sort-select">
                        <option value="name">이름순</option>
                        <option value="distance">거리순</option>
                        <option value="recent">최근 추가순</option>
                    </select>
                </div>
                <div id="pm-partner-list" class="pm-partner-list"></div>
            </div>
        </section>

        <!-- 파트너 상세 모달 -->
        <div id="pm-modal" class="pm-modal">
            <div class="pm-modal-overlay"></div>
            <div class="pm-modal-content">
                <button id="pm-modal-close" class="pm-modal-close" aria-label="닫기">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <div id="pm-modal-body" class="pm-modal-body">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>
        </div>

        <!-- 공유 모달 -->
        <div id="pm-share-modal" class="pm-modal">
            <div class="pm-modal-overlay"></div>
            <div class="pm-modal-content pm-share-modal-content">
                <button class="pm-modal-close" onclick="window.closeShareModal()" aria-label="닫기">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <div class="pm-share-modal-body">
                    <h3>업체 공유하기</h3>
                    <div class="pm-share-buttons">
                        <button id="pm-share-copy" class="pm-share-btn pm-share-copy">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            링크 복사
                        </button>
                        <button id="pm-share-kakao" class="pm-share-btn pm-share-kakao">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 3c5.799 0 10.5 3.664 10.5 8.185 0 4.52-4.701 8.184-10.5 8.184a13.5 13.5 0 0 1-1.727-.11l-4.408 2.883c-.501.265-.678.236-.472-.413l.892-3.678c-2.88-1.46-4.785-3.99-4.785-6.866C1.5 6.665 6.201 3 12 3z"/>
                            </svg>
                            카카오톡
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 토스트 알림 컨테이너 -->
        <div id="pm-toast-container" class="pm-toast-container"></div>

        <!-- 재사용 가능한 숨김 요소들 (createElement 제거용) -->
        <div id="pm-toast" class="pm-toast" style="display: none;"></div>
        <textarea id="pm-clipboard-helper" style="position: absolute; left: -9999px; opacity: 0;"></textarea>
        <div id="pm-error-message" class="pm-error-message" style="display: none;"></div>

    </div>
    <!-- /partnermap-container -->

    <!-- JavaScript 파일들 (순서 중요!) -->
    <script src="./makeshop-js-part1.js"></script>
    <script src="./makeshop-js-part2a.js"></script>
    <script src="./makeshop-js-part2b1.js"></script>
    <script src="./makeshop-js-part2b2.js"></script>

    <!-- 테스트용 콘솔 로그 -->
    <script>
        console.log('='.repeat(60));
        console.log('🧪 파트너맵 v3 - Phosphor Icons 로컬 테스트');
        console.log('='.repeat(60));
        console.log('');
        console.log('✅ 확인 사항:');
        console.log('1. Phosphor Icons CDN 로드 성공 여부');
        console.log('2. 파트너 카드의 하트/위치/전화 아이콘');
        console.log('3. 모달의 각종 아이콘 (공유, 지도, 연락처)');
        console.log('4. 즐겨찾기 토글 시 하트 아이콘 변경');
        console.log('');
        console.log('📌 테스트 방법:');
        console.log('- 파트너 카드 클릭 → 모달 확인');
        console.log('- 즐겨찾기 버튼 클릭 → 하트 아이콘 변경 확인');
        console.log('- Network 탭에서 @phosphor-icons 로드 확인');
        console.log('');
        console.log('='.repeat(60));
    </script>
</body>
</html>
