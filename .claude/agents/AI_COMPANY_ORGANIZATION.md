# AI 회사 조직도

## 🏢 조직 구조 (16명의 전문가)

```
                          ┌─────────────────────────┐
                          │   CEO (당신)            │
                          │   자연어로 지시         │
                          └───────────┬─────────────┘
                                      │
                    ┌─────────────────┼─────────────────┐
                    │                                   │
            ┌───────▼────────┐              ┌──────────▼──────────┐
            │  기획실 (PM)    │              │  품질본부 (QA)       │
            │  product-manager│              │  code-reviewer      │
            └────────┬────────┘              │  security-auditor   │
                     │                       │  qa-engineer        │
          ┌──────────┼──────────┐           │  technical-writer   │
          │                     │            └─────────────────────┘
    ┌─────▼──────┐     ┌───────▼──────┐
    │ 기술본부    │     │ 도메인자문단  │
    └─────┬──────┘     └───────┬───────┘
          │                    │
    ┌─────┼─────┬──────┬──────┼──────┬──────┬──────┐
    │     │     │      │      │      │      │      │
    ▼     ▼     ▼      ▼      ▼      ▼      ▼      ▼
[Arch] [DB] [UI]  [Dev] [HR] [Tax] [Sub] [SME] [Acc] [Doc]
```

---

## 📋 부서별 에이전트 상세

### 1️⃣ 기획실 (Planning Division)

#### product-manager
- **역할**: 요구사항 분석, 사용자 스토리 작성, 도메인 자문 라우팅
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "요구사항", "기획", "스토리", "기능 정의"
  - "Phase X 계획", "로드맵", "우선순위"
- **출력물**: 요구사항 명세서, 수용 기준, 도메인 자문 필요 영역
- **협업**:
  - → fullstack-architect (기술 설계 위임)
  - → 도메인 전문가들 (자문 요청)

---

### 2️⃣ 기술본부 (Technical Division)

#### fullstack-architect
- **역할**: 아키텍처 설계, SC/CC 분리, Server Actions 패턴
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "아키텍처", "설계", "기술 스택", "패턴"
  - "SC/CC", "Server Actions", "데이터 흐름"
- **출력물**: 기술 설계 문서, 파일 구조, 컴포넌트 계층
- **협업**:
  - ← product-manager (요구사항 수신)
  - → db-architect (DB 설계 위임)
  - → ui-ux-advisor (UI 설계 위임)
  - → code-reviewer (설계 검증 요청)

#### db-architect
- **역할**: Prisma 스키마 설계, 마이그레이션, 인덱스 최적화
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "DB", "스키마", "Prisma", "마이그레이션"
  - "테이블", "관계", "인덱스", "쿼리 최적화"
- **출력물**: schema.prisma, 마이그레이션 파일, 시드 데이터
- **협업**:
  - ← fullstack-architect (DB 요구사항 수신)
  - → devops-engineer (마이그레이션 적용 요청)

#### ui-ux-advisor
- **역할**: shadcn/ui 기반 컴포넌트 설계, 반응형 레이아웃
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "UI", "UX", "디자인", "레이아웃"
  - "shadcn", "컴포넌트", "반응형", "접근성"
- **출력물**: 컴포넌트 구조, UI 목업, 사용성 개선안
- **협업**:
  - ← fullstack-architect (UI 요구사항 수신)

#### devops-engineer
- **역할**: 빌드 검증, 타입 체크, ESLint, 배포
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "빌드", "배포", "Vercel", "타입 에러"
  - "ESLint", "CI/CD", "마이그레이션 적용"
- **출력물**: 빌드 결과, 에러 분석, 배포 가이드
- **협업**:
  - ← 모든 부서 (빌드 검증 요청)

---

### 3️⃣ 도메인 자문단 (Domain Experts)

#### hr-labor-expert (노무 전문가)
- **역할**: 근로기준법, 연차 산정, 모성보호, 유연근무
- **모델**: opus (법적 정확성 필요)
- **호출 트리거 키워드**:
  - "연차", "휴가", "근로시간", "근로기준법"
  - "출산휴가", "육아휴직", "유연근무", "주52시간"
- **출력물**: 노무 자문 보고서, 법적 근거, 계산 규칙
- **협업**:
  - ↔ payroll-tax-expert (급여 계산 교차 검증)
  - → product-manager (법적 요건 전달)

#### payroll-tax-expert (급여/세무 전문가)
- **역할**: 4대보험, 소득세, 퇴직금, 최저임금 검증
- **모델**: opus (1원 단위 정확성 필요)
- **호출 트리거 키워드**:
  - "급여", "4대보험", "소득세", "퇴직금"
  - "국민연금", "건강보험", "간이세액표", "최저임금"
- **출력물**: 급여 계산 검증 결과, 절사 규칙, 세액 계산
- **협업**:
  - ↔ hr-labor-expert (법정 수당 교차 검증)
  - ↔ accounting-expert (회계 처리 협의)

#### employment-subsidy-expert (고용지원금 전문가)
- **역할**: 정부 지원금 자격 판단, 신청 서류 준비
- **모델**: opus
- **호출 트리거 키워드**:
  - "지원금", "보조금", "장려금", "고용지원금"
  - "유연근무", "대체인력", "육아휴직", "청년 채용"
- **출력물**: 지원금 자격 판단, 신청 가이드, 증빙 서류 목록
- **협업**:
  - → hr-labor-expert (자격 요건 확인)
  - → accounting-expert (증빙 자료 준비)

#### sme-policy-expert (중소기업 정책 전문가)
- **역할**: 중소기업 정책자금, 판로지원, 유통 특화 지원
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "정책자금", "중소기업", "유통", "도소매"
  - "디지털전환", "스마트상점", "판로지원"
- **출력물**: 정책자금 분석, 신청 가능 사업 목록
- **협업**:
  - → employment-subsidy-expert (지원금 통합 분석)

#### tax-incentive-expert (세제혜택 전문가)
- **역할**: 세액공제, 두루누리, 중소기업 특별세액감면
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "세액공제", "세제혜택", "두루누리"
  - "고용증대", "중소기업 감면"
- **출력물**: 세제혜택 체크리스트, 신고 가이드
- **협업**:
  - ↔ payroll-tax-expert (세액 계산 협의)
  - → accounting-expert (세무사 전달 자료)

#### document-admin-expert (문서/행정 전문가)
- **역할**: 법정 서식, 근로계약서, 전자결재, PDF 생성
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "근로계약서", "증명서", "전자결재", "PDF"
  - "서식", "문서", "임금명세서"
- **출력물**: 법정 서식, PDF 템플릿, 전자결재 워크플로우
- **협업**:
  - ← hr-labor-expert (법정 필수 항목 확인)

#### accounting-expert (회계/재무 전문가)
- **역할**: 급여대장, 원천징수, Excel 내보내기, 세무사 연동
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "급여대장", "원천징수", "Excel", "세무사"
  - "인건비", "집계", "부서별 통계"
- **출력물**: 급여대장 Excel, 원천징수 세액 집계표
- **협업**:
  - ← payroll-tax-expert (급여 계산 결과 수신)
  - → tax-incentive-expert (세제혜택 반영)

---

### 4️⃣ 품질본부 (Quality Assurance)

#### code-reviewer
- **역할**: 코드 품질, 패턴 준수, 타입 안전성 검증
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "코드 리뷰", "검토", "품질", "패턴"
  - "리팩토링", "개선", "Best Practice"
- **출력물**: 코드 리뷰 보고서, 개선 제안
- **협업**:
  - ← fullstack-architect (설계 검증)
  - → qa-engineer (테스트 필요 항목 전달)

#### security-auditor
- **역할**: 보안 취약점, RBAC, 데이터 보호, OWASP Top 10
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "보안", "RBAC", "권한", "취약점"
  - "SQL 인젝션", "XSS", "CSRF", "데이터 보호"
- **출력물**: 보안 감사 보고서, 취약점 목록, 개선 방안
- **협업**:
  - ← fullstack-architect (설계 단계 보안 검토)

#### qa-engineer
- **역할**: Vitest 단위 테스트, 경계값 분석, 급여 계산 테스트
- **모델**: sonnet
- **호출 트리거 키워드**:
  - "테스트", "검증", "Vitest", "테스트 케이스"
  - "경계값", "엣지케이스", "단위 테스트"
- **출력물**: 테스트 코드, 테스트 시나리오, 커버리지 보고서
- **협업**:
  - ← payroll-tax-expert (급여 계산 테스트 케이스)
  - ← code-reviewer (테스트 필요 항목 수신)

#### technical-writer
- **역할**: MEMORY.md 갱신, 주석 정리, 문서화
- **모델**: haiku (비용 최적화)
- **호출 트리거 키워드**:
  - "문서화", "MEMORY 업데이트", "주석", "정리"
  - "README", "가이드", "메뉴얼"
- **출력물**: 업데이트된 MEMORY.md, 기술 문서
- **협업**:
  - ← 모든 부서 (작업 완료 후 문서화 요청)

---

## 🔄 자동 라우팅 규칙

### 단일 에이전트 호출 규칙

| 키워드 패턴 | 호출 에이전트 | 우선순위 |
|------------|-------------|---------|
| 연차, 휴가, 근로시간, 주52시간 | hr-labor-expert | 높음 |
| 급여, 4대보험, 소득세, 퇴직금 | payroll-tax-expert | 높음 |
| 지원금, 보조금, 장려금 | employment-subsidy-expert | 중간 |
| 아키텍처, 설계, 기술 스택 | fullstack-architect | 중간 |
| DB, 스키마, Prisma | db-architect | 중간 |
| UI, UX, 디자인 | ui-ux-advisor | 낮음 |
| 보안, RBAC, 권한 | security-auditor | 높음 |
| 테스트, Vitest | qa-engineer | 중간 |
| 근로계약서, 증명서, PDF | document-admin-expert | 중간 |
| 급여대장, 원천징수, Excel | accounting-expert | 중간 |

### 오케스트레이션 트리거 (병렬 실행)

| 트리거 키워드 | 호출 에이전트 조합 | 목적 |
|-------------|-----------------|-----|
| **"검증해줘", "리뷰해줘", "감사해줘"** | hr-labor + payroll-tax + security-auditor | 다면 검증 |
| **"계획 세워줘", "로드맵"** | product-manager + fullstack-architect | 기획+설계 |
| **"전체 분석"** | hr-labor + payroll-tax + accounting + employment-subsidy | 종합 분석 |
| **"보안 점검"** | security-auditor + code-reviewer + qa-engineer | 품질 게이트 |
| **"구현해줘"** (복잡한 기능) | fullstack-architect + db-architect + ui-ux-advisor | 설계 팀 |

### 체이닝 트리거 (순차 실행)

| 트리거 키워드 | 체인 순서 | 목적 |
|-------------|----------|-----|
| **"새 기능 추가"** | PM → Architect → DB → Dev → QA | 전체 개발 사이클 |
| **"급여 계산 로직 추가"** | PM → payroll-tax → Architect → QA | 도메인 검증 포함 |
| **"문서 생성 기능"** | PM → document-admin → Architect → Dev | 법정 요건 반영 |

---

## 🎯 실전 사용 예시

### 예시 1: 단일 에이전트
```
요청: "연차 계산 로직이 맞는지 확인해줘"

자동 라우팅:
- 키워드 매칭: "연차", "계산"
- 선택된 에이전트: hr-labor-expert
- 실행: Task(hr-labor-expert)
```

### 예시 2: 오케스트레이션
```
요청: "급여 시스템을 전체적으로 검증해줘"

자동 라우팅:
- 키워드 매칭: "급여", "검증"
- 오케스트레이션 트리거: "검증해줘"
- 선택된 에이전트: hr-labor + payroll-tax + security-auditor
- 실행: 3개 에이전트 병렬 실행
```

### 예시 3: 체이닝
```
요청: "퇴직금 자동 계산 기능을 추가해줘"

자동 라우팅:
- 키워드 매칭: "퇴직금", "기능 추가"
- 체이닝 트리거: "기능 추가"
- 체인 순서:
  1. product-manager (요구사항 정의)
  2. payroll-tax-expert (퇴직금 계산 로직 자문)
  3. fullstack-architect (기술 설계)
  4. code-reviewer (구현 후 리뷰)
```

---

## 📝 에이전트 추가 가이드

### 새 에이전트 추가 시 체크리스트

1. **에이전트 정의 파일 작성** (`.claude/agents/new-expert.md`)
   - name, description, model, color, memory, tools 설정
   - 시스템 프롬프트 작성 (역할, 전문 영역, 산출물 형식)

2. **조직도 업데이트** (이 파일)
   - 부서 배치
   - 협업 관계 정의
   - 호출 트리거 키워드 정의

3. **라우팅 규칙 추가** (`.claude/routing-rules.json`)
   - 키워드 패턴 추가
   - 오케스트레이션 조합 추가

4. **테스트 실행**
   - 단일 호출 테스트
   - 다른 에이전트와 협업 테스트
   - 메모리 축적 확인

---

## 🔧 유지보수 가이드

### 정기 점검 항목 (월 1회)

- [ ] 각 에이전트의 MEMORY.md 검토 (200줄 초과 시 분리)
- [ ] 협업 패턴 효율성 분석 (불필요한 호출 제거)
- [ ] 라우팅 규칙 최적화 (오판 사례 수정)
- [ ] 새로운 도메인 지식 반영 (법 개정, 기술 변경)

### 성능 최적화

- **Opus 사용 최소화**: 법적/재무적 정확성 필요 시만 (hr, payroll, subsidy)
- **Sonnet 기본**: 일반적 작업
- **Haiku 활용**: 문서화, 간단한 정리 작업

---

## 📚 참고 문서

- [에이전트 시스템 완벽 가이드](./AGENT_SYSTEM_GUIDE.md)
- [라우팅 규칙 설정](./routing-rules.json)
- [에이전트 메모리 관리](../memory/subagent-guide.md)
